(this["webpackJsonpprenotazioni-bar"]=this["webpackJsonpprenotazioni-bar"]||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(8),o=a.n(i),l=(a(86),a(87),a(15)),c=a(137),u=a(153),m=a(136),d=a(131),s=a(26);var p=function(){return r.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(s.b,{color:"inherit",to:"/"},"Prenotazioni Bar")," ",(new Date).getFullYear(),".")},E=a(135),h=a(17),f=a(134),g=function(){var e=Object(h.b)().loginWithRedirect;return r.a.createElement(f.a,{style:{width:"100%"},color:"primary",variant:"outlined",onClick:function(){return e()}},"Accedi")},b=Object(E.a)((function(e){return{paper:{marginTop:e.spacing(8),alignItems:"center",width:"100%"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function O(e){e.data,e.setEmail,e.setPassword,e.handleSubmit;var t=b();return r.a.createElement(m.a,{component:"main",maxWidth:"xs"},r.a.createElement(c.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement("center",null,r.a.createElement(g,null))),r.a.createElement(u.a,{mt:8},r.a.createElement(p,null)))}function v(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],i=t[1],o=Object(n.useState)(""),c=Object(l.a)(o,2),u=c[0],m=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{data:{email:a,password:u},setEmail:i,setPassword:m}))}var y=a(10),j=a(154),P=a(138),C=Object(E.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function S(e){var t=e.data,a=e.setNome,n=e.setCognome,i=e.setEmail,o=e.setPassword,l=e.handleSubmit,E=C();return r.a.createElement(m.a,{component:"main",maxWidth:"xs"},r.a.createElement(c.a,null),r.a.createElement("div",{className:E.paper},r.a.createElement(d.a,{component:"h1",variant:"h5"},"Crea il tuo account"),r.a.createElement("form",{className:E.form,onSubmit:l},r.a.createElement(P.a,{container:!0,spacing:2},r.a.createElement(P.a,{item:!0,xs:12,sm:6},r.a.createElement(j.a,{autoComplete:"nome",name:"nome",variant:"outlined",required:!0,fullWidth:!0,id:"nome",label:"Nome",autoFocus:!0,value:t.nome,onChange:function(e){return a(e.target.value)}})),r.a.createElement(P.a,{item:!0,xs:12,sm:6},r.a.createElement(j.a,{variant:"outlined",required:!0,fullWidth:!0,id:"cognome",label:"Cognome",name:"cognome",autoComplete:"cognome",value:t.cognome,onChange:function(e){return n(e.target.value)}})),r.a.createElement(P.a,{item:!0,xs:12},r.a.createElement(j.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Indirizzo Email",name:"email",autoComplete:"email",value:t.email,onChange:function(e){return i(e.target.value)}})),r.a.createElement(P.a,{item:!0,xs:12},r.a.createElement(j.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:t.password,onChange:function(e){return o(e.target.value)}}))),r.a.createElement(f.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:E.submit},"Crea Account"),r.a.createElement(P.a,{container:!0,justify:"flex-end"},r.a.createElement(P.a,{item:!0},r.a.createElement(s.b,{to:"/",variant:"body2"},"Hai gi\xe0 un account? Accedi"))))),r.a.createElement(u.a,{mt:5},r.a.createElement(p,null)))}function w(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],i=t[1],o=Object(n.useState)(""),c=Object(l.a)(o,2),u=c[0],m=c[1],d=Object(n.useState)(""),s=Object(l.a)(d,2),p=s[0],E=s[1],h=Object(n.useState)(""),f=Object(l.a)(h,2),g=f[0],b=f[1],O=Object(n.useState)(""),v=Object(l.a)(O,2),j=v[0],P=v[1];return r.a.createElement(r.a.Fragment,null,function(){if(a)return r.a.createElement(y.a,{to:"/home"})}(),r.a.createElement(S,{data:{nome:u,cognome:p,email:g,password:j},setNome:m,setCognome:E,setEmail:b,setPassword:P,handleSubmit:function(e){e.preventDefault(),i(!0)}}))}var x=a(49),D=a(50),k=a(19),R=a(53),N=a(52),z=a(150),A=a(151),q=a(142),T=a(143),I=a(144),F=a(145),Q=a(146),B=a(147);function G(e){var t=e.prodotto,a=e.aggiungiProdotto,i=e.rimuoviProdotto,o=W(),c=Object(n.useState)(!1),u=Object(l.a)(c,2),m=u[0],s=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{xs:12,sm:6,lg:4,xl:2,key:t.id,item:!0},r.a.createElement(q.a,{elevation:m?20:2,className:o.cardItem},r.a.createElement(T.a,null,r.a.createElement(d.a,{className:o.title,color:"textSecondary",gutterBottom:!0},t.tipoprodotto),r.a.createElement(d.a,{variant:"h5",component:"h2",gutterBottom:!0},t.nomeprodotto),r.a.createElement(d.a,{style:{color:"#A9A9A9"},variant:"body2",component:"p"},r.a.createElement("i",null,t.descrizione))),r.a.createElement(I.a,{variant:"middle"}),r.a.createElement(F.a,null,r.a.createElement(d.a,{style:{width:"30%"},variant:"h5",component:"h2"},"\u20ac".concat(t.prezzo.toFixed(2))),r.a.createElement(f.a,{style:{width:"60%"},variant:"contained",size:"small",color:m?"secondary":"primary",className:o.button,endIcon:m?r.a.createElement(Q.a,{size:"small"}):r.a.createElement(B.a,{size:"small"}),onClick:function(){return e={prodotto:t,"quantit\xe0":1},m?i(e.prodotto.id):a(e),void s(!m);var e}},m?"Rimuovi":"Aggiungi")))," "))}var W=Object(E.a)({cardItem:{height:"100%",width:"100%"},title:{fontSize:14}}),L=Object(E.a)({root:{margin:"auto",flexGrow:1}});function M(e){var t=e.prodotti,a=e.prodottiOrdine,n=e.setProdottiOrdine,i=L(),o=function(e){var t=a;t.push(e),n(t)},l=function(e){var t=a.findIndex((function(t){return t.prodotto.id===e}));t>-1&&(a.splice(t,1),n(a))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{className:i.root,container:!0,justify:"flex-start",spacing:3},t.map((function(e){return r.a.createElement(G,{key:e.id,prodotto:e,aggiungiProdotto:o,rimuoviProdotto:l})}))))}var J=a(148),U=a(149),X=a(141),Y=a(152),H=a(156),K=["10:05-10:20","10:15-10:30","10:25-10:40","10:35-10:50","10:45-11:00","10:55-11:10","11:05-11:20","11.15-11:30","11.25-11:40"];var V=function(e){var t=e.ordine,a=e.updateQuantit\u00e0OrdineConId,i=e.setOrarioDiRitiro,o=e.totaleDaPagare,c=e.submitOrdine,u=Object(n.useState)(""),m=Object(l.a)(u,2),s=m[0],p=m[1],E=Object(h.b)().user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{variant:"h4",gutterBottom:!0},"Riepilogo Ordine"),r.a.createElement(I.a,null),t.map((function(e){return r.a.createElement("div",{key:e.prodotto.id},r.a.createElement("br",null),r.a.createElement(P.a,{container:!0,justify:"flex-start"},r.a.createElement(P.a,{item:!0,xs:4},r.a.createElement(d.a,{variant:"subtitle1"},e.prodotto.nomeprodotto)),r.a.createElement(P.a,{style:{whiteSpace:"nowrap"},item:!0,xs:5},r.a.createElement(J.a,{onClick:function(){a(e.prodotto.id,e.quantit\u00e0-1)}},r.a.createElement(Q.a,{style:{marginRight:5},fontSize:"small"})),r.a.createElement(U.a,{badgeContent:e.quantit\u00e0,color:"primary"}),r.a.createElement(J.a,{onClick:function(){a(e.prodotto.id,e.quantit\u00e0+1)}},r.a.createElement(B.a,{style:{display:"inline",marginLeft:5},fontSize:"small"}))),r.a.createElement(P.a,{item:!0,xs:3},r.a.createElement(d.a,{variant:"subtitle1"},"\u20ac".concat((e.prodotto.prezzo*e.quantit\u00e0).toFixed(2))))),r.a.createElement(d.a,{variant:"caption"},r.a.createElement("i",null," - ",e.prodotto.descrizione)))})),r.a.createElement("br",null),r.a.createElement(I.a,null),r.a.createElement("br",null),r.a.createElement(P.a,{container:!0,justify:"flex-end"},r.a.createElement(P.a,{item:!0,xs:8},"Totale da pagare:"),r.a.createElement(P.a,{item:!0,xs:4},"\u20ac",o.toFixed(2))),r.a.createElement("br",null),r.a.createElement(I.a,null),r.a.createElement("br",null),r.a.createElement(X.a,{style:{width:"100%"}},r.a.createElement(d.a,{variant:"subtitle1"},"Seleziona l'orario di ritiro:"),r.a.createElement(Y.a,{value:s,onChange:function(e){p(e.target.value),i(e.target.value)}},r.a.createElement(H.a,{value:"",disabled:!0},"Seleziona l'orario di ritiro"),K.map((function(e){return r.a.createElement(H.a,{key:e,value:e},e)})))),r.a.createElement(f.a,{color:"primary",onClick:function(){return c(E.name)}},"Prenota"))},Z=function(){var e=Object(h.b)().logout;return r.a.createElement(f.a,{style:{color:"white"},onClick:function(){return e({returnTo:window.location.origin})}},"Esci")},$=function(e){var t=e.prodotti,a=e.prodottiOrdine,n=e.setProdottiOrdine,i=e.updateQuantit\u00e0OrdineConId,o=e.setOrarioDiRitiro,l=e.totaleDaPagare,c=e.submitOrdine,u=Object(h.b)(),s=u.user,p=u.isLoading,E=u.isAuthenticated;return p||E?!p&&E&&"lekjec@gmail.com"===s.email?r.a.createElement(y.a,{to:"/ordini"}):!p&&E?r.a.createElement("div",{style:{margin:0,width:"100%"}},r.a.createElement("img",{style:{width:"100%"},src:"https://picsum.photos/id/1080/1024/300",alt:""}),r.a.createElement(z.a,{stlye:{flexGrow:1},position:"static"},r.a.createElement(A.a,null,r.a.createElement(d.a,{variant:"h6"},"Prenotazioni Bar Malignani"),r.a.createElement(Z,null))),r.a.createElement(m.a,null,r.a.createElement(d.a,{variant:"h3",gutterBottom:!0},"I nostri Panini e le nostre Pizze")),r.a.createElement(P.a,{container:!0,justify:"center",spacing:5},r.a.createElement(P.a,{item:!0,md:8},r.a.createElement(M,{prodotti:t,prodottiOrdine:a,setProdottiOrdine:n})),a.length>0?r.a.createElement(P.a,{item:!0,xs:10,md:4},r.a.createElement(V,{ordine:a,"updateQuantit\xe0OrdineConId":i,setOrarioDiRitiro:o,totaleDaPagare:l,submitOrdine:c})):null)):p?r.a.createElement("center",null,r.a.createElement("h1",null,"Loading...")):void 0:r.a.createElement(y.a,{to:"/"})},_=function(e){Object(R.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).state={prodottiOrdine:[],orarioDiRitiroOrdie:"Non Seleionato",totaleDaPagare:0,richiestaProdottiEffettuata:!1},n.setProdottiOrdine=n.setProdottiOrdine.bind(Object(k.a)(n)),n.updateQuantit\u00e0OrdineConId=n.updateQuantit\u00e0OrdineConId.bind(Object(k.a)(n)),n.setOrarioDiRitiro=n.setOrarioDiRitiro.bind(Object(k.a)(n)),n.getNuovoTotaleDaPagare=n.getNuovoTotaleDaPagare.bind(Object(k.a)(n)),n.submitOrdine=n.submitOrdine.bind(Object(k.a)(n)),n}return Object(D.a)(a,[{key:"getNuovoTotaleDaPagare",value:function(){var e=0;return this.state.prodottiOrdine.forEach((function(t){e+=t.quantit\u00e0*t.prodotto.prezzo})),e}},{key:"setProdottiOrdine",value:function(e){this.setState({prodottiOrdine:e,totaleDaPagare:this.getNuovoTotaleDaPagare()})}},{key:"updateQuantit\xe0OrdineConId",value:function(e,t){var a=this;t>0&&t<=10&&this.setState((function(n){return{prodottiOrdine:n.prodottiOrdine.map((function(a){return a.prodotto.id===e&&(a.quantit\u00e0=t),a})),totaleDaPagare:a.getNuovoTotaleDaPagare()}}))}},{key:"setOrarioDiRitiro",value:function(e){""!==e&&this.setState({orarioDiRitiroOrdie:e})}},{key:"submitOrdine",value:function(e){if("Non Seleionato"!==this.state.orarioDiRitiroOrdie){var t={identificativoCliente:e,orarioDiRitiro:this.state.orarioDiRitiroOrdie,prodottiOrdine:this.state.prodottiOrdine.map((function(e){return{prodotto:e.prodotto.id,"quantit\xe0":e.quantit\u00e0}}))},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};fetch("/api/ordini",a).then((function(e){return e.json()})).then((function(e){alert(e.msg),window.location.reload()})).catch((function(e){return console.log("Errore durante la richiesta di post al server: ".concat(e))}))}else alert("Selezionare l'orario di ritiro")}},{key:"componentDidMount",value:function(){var e=this;fetch("/api/prodotti/").then((function(e){return e.json()})).then((function(t){e.setState({richiestaProdottiEffettuata:!0,prodotti:t})})).catch("Errore nel fetch dei prodotti: "+console.log)}},{key:"render",value:function(){return this.state.richiestaProdottiEffettuata?r.a.createElement($,{prodotti:this.state.prodotti,prodottiOrdine:this.state.prodottiOrdine,setProdottiOrdine:this.setProdottiOrdine,"updateQuantit\xe0OrdineConId":this.updateQuantit\u00e0OrdineConId,setOrarioDiRitiro:this.setOrarioDiRitiro,totaleDaPagare:this.state.totaleDaPagare,submitOrdine:this.submitOrdine}):r.a.createElement("center",null,r.a.createElement("h1",null,"Loading..."))}}]),a}(r.a.Component);function ee(e){var t=e.ordine,a=e.requestStateChange,i=Object(n.useState)(!1),o=Object(l.a)(i,2),c=o[0],u=o[1];return r.a.createElement(P.a,{xs:12,item:!0},r.a.createElement("br",null),r.a.createElement(I.a,null),r.a.createElement("br",null),r.a.createElement(P.a,{container:!0,justify:"space-between",onClick:function(){u(!c)}},r.a.createElement(d.a,{variant:"subtitle1"},"".concat(t.identificativocliente)),r.a.createElement(d.a,{variant:"subtitle1"},"\u20ac".concat(t.totaledapagare.toFixed(2)))),r.a.createElement("div",{style:{display:c?"block":"none"}},t.prodottiordine.map((function(e){return r.a.createElement("div",{key:e.prodotto.id},r.a.createElement(P.a,{container:!0,justify:"space-between"},r.a.createElement(d.a,{variant:"subtitle1",component:"p"}," \u2022 ".concat(e.prodotto.nomeprodotto)),r.a.createElement(d.a,{variant:"subtitle1"},"Qt: ".concat(e.quantit\u00e0))),r.a.createElement(d.a,{variant:"caption",component:"p"},r.a.createElement("i",null,"    - ".concat(e.prodotto.descrizione))))})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(P.a,{container:!0,justify:"space-between"},r.a.createElement(d.a,{variant:"caption",component:"p"},"Stato: ",t.stato),r.a.createElement(f.a,{variant:"outlined",onClick:function(){return a(t.id)}},function(e){switch(e){case"DA-PREPARARE":return"Pronto";case"PREPARATO":return"Consegnato";case"CONSEGNATO":return"Gi\xe0 Consegnato";default:return"Errore"}}(t.stato)))))}var te=Object(E.a)({root:{margin:"auto",flexGrow:1}});function ae(e){var t=e.arrayOrdini,a=e.requestStateChange,n=te();return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{className:n.root,container:!0,justify:"flex-start",spacing:3},K.map((function(e){var i=0;return r.a.createElement(P.a,{xs:12,sm:6,md:4,lg:3,item:!0,key:e},r.a.createElement(q.a,{style:{height:"100%",width:"95%"},elevation:5},r.a.createElement(T.a,null,r.a.createElement(d.a,{style:{textAlign:"center"},variant:"subtitle2"},e),r.a.createElement(P.a,{className:n.root,container:!0,justify:"flex-start"},t.map((function(t){return e===t.orariodiritiro?(i++,r.a.createElement(ee,{key:t.id,ordine:t,requestStateChange:a})):""})),function(e){return 0===e?r.a.createElement("h6",null,"Niente ordini per questa fascia oraria"):(e=0,"")}(i)))))}))))}var ne=function(e){Object(R.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this)).state={arrayOrdini:[],fetchedOrdini:!1},n.fetchOrdiniFromDatabase=n.fetchOrdiniFromDatabase.bind(Object(k.a)(n)),n.updateStatoOrdine=n.updateStatoOrdine.bind(Object(k.a)(n)),n.requestStateChange=n.requestStateChange.bind(Object(k.a)(n)),n}return Object(D.a)(a,[{key:"updateStatoOrdine",value:function(e){var t=this.state.arrayOrdini.map((function(t){if(t.id.toString()===e.toString())switch(t.stato){case"DA-PREPARARE":t.stato="PREPARATO";break;case"PREPARATO":t.stato="CONSEGNATO"}return t}));this.setState({arrayOrdini:t})}},{key:"requestStateChange",value:function(e){var t=this;fetch("/api/ordini/modificaStato/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){t.updateStatoOrdine(e)})).catch("Errore nella richiesta di aggiornamento dello stato dell'ordine: ".concat(console.log))}},{key:"fetchOrdiniFromDatabase",value:function(){var e=this;fetch("/api/ordini/").then((function(e){return e.json()})).then((function(t){e.setState({fetchedOrdini:!0,arrayOrdini:t})})).catch("Errore nel fetch degli ordini: "+console.log)}},{key:"componentDidMount",value:function(){this.fetchOrdiniFromDatabase()}},{key:"render",value:function(){var e=Object(h.b)(),t=e.user,a=e.isLoading,n=e.isAuthenticated;return a||n?!a&&n&&"lekjec@gmail.com"!==t.email?r.a.createElement(y.a,{to:"/home"}):this.state.fetchedOrdini&&!a&&n&&"lekjec@gmail.com"===t.email?r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{stlye:{flexGrow:1},position:"static"},r.a.createElement(A.a,null,r.a.createElement(d.a,{variant:"h6"},"Prenotazioni Bar Malignani"),r.a.createElement(Z,null))),r.a.createElement(ae,{arrayOrdini:this.state.arrayOrdini,requestStateChange:this.requestStateChange})):r.a.createElement("center",null,r.a.createElement("h1",null,"Loading...")):r.a.createElement(y.a,{to:"/"})}}]),a}(n.Component);a(99);var re=function(){return r.a.createElement(s.a,{className:"App"},r.a.createElement(y.d,null,r.a.createElement(y.b,{path:"/",exact:!0,component:v}),r.a.createElement(y.b,{path:"/sign-up",component:w}),r.a.createElement(y.b,{path:"/home",component:_}),r.a.createElement(y.b,{path:"/ordini",component:ne})))};o.a.render(r.a.createElement(h.a,{domain:"lekjec.eu.auth0.com",clientId:"DYvso3Kgu639QNpeRXmuX96vIqF3oGLa",redirectUri:"".concat(window.location.origin,"/home")},r.a.createElement(re,null)),document.getElementById("root"))},81:function(e,t,a){e.exports=a(100)},86:function(e,t,a){},87:function(e,t,a){}},[[81,1,2]]]);
//# sourceMappingURL=main.913f092e.chunk.js.map